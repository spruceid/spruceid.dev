<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Spruce Developer Portal Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Spruce Developer Portal Blog Atom Feed"><title data-react-helmet="true">Document Loading | Spruce Developer Portal</title><meta data-react-helmet="true" property="og:url" content="https://spruceid.dev/docs/didkit/document-loading"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Document Loading | Spruce Developer Portal"><meta data-react-helmet="true" name="description" content="Introduction"><meta data-react-helmet="true" property="og:description" content="Introduction"><link data-react-helmet="true" rel="shortcut icon" href="/assets/logo.png"><link data-react-helmet="true" rel="canonical" href="https://spruceid.dev/docs/didkit/document-loading"><link data-react-helmet="true" rel="alternate" href="https://spruceid.dev/docs/didkit/document-loading" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://spruceid.dev/docs/didkit/document-loading" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.90ea415b.css">
<link rel="preload" href="/assets/js/runtime~main.9b18645a.js" as="script">
<link rel="preload" href="/assets/js/main.2e2ea6f1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://spruceid.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/assets/logo.png" alt="Spruce Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/assets/logo.png" alt="Spruce Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Spruce</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" usebaseurl="/" href="/">Quickstart</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" usebaseurl="/docs/" href="/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" usebaseurl="/didkit/" href="/docs/didkit/">DIDKit</a><a class="navbar__item navbar__link" usebaseurl="/credible/" href="/docs/credible">Credible</a><a href="https://blog.spruceid.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" usebaseurl="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/spruceid/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_cxYs react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://spruceid.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/assets/logo.png" alt="Spruce Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/assets/logo.png" alt="Spruce Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Spruce</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" usebaseurl="/" href="/">Quickstart</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" usebaseurl="/docs/" href="/docs/">Docs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" usebaseurl="/didkit/" href="/docs/didkit/">DIDKit</a></li><li class="menu__list-item"><a class="menu__link" usebaseurl="/credible/" href="/docs/credible">Credible</a></li><li class="menu__list-item"><a href="https://blog.spruceid.com/" target="_blank" rel="noopener noreferrer" class="menu__link" usebaseurl="/blog/">Blog</a></li><li class="menu__list-item"><a href="https://github.com/spruceid/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><div class="docSidebarContainer_0YBq" role="complementary"><div class="sidebar_a3j0"><div class="menu menu--responsive thin-scrollbar menu_cyFh"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">.dev Portal</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Home</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/primer">What is Decentralized Identity?</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">DIDKit</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/didkit/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/didkit/install">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/didkit/concepts">Core Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/didkit/did-methods">DID Methods</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/didkit/runtime-config">Runtime Configuration</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/didkit/document-loading">Document Loading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/didkit/changelog">Changelog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/didkit/specs_and_deps">Specifications &amp; Dependencies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/didkit/glossary">Glossary</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">DIDKit Packages</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-packages/">Overview of DIDKit Packages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-packages/cli">Command Line Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-packages/http">HTTP Server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-packages/rust">Rust Crate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-packages/C">C Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-packages/java">Java &amp; Android</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-packages/python">Python</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-packages/node">Javascript</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">DIDKit Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-examples/">Overview of Examples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-examples/core-functions-in-bash">Core Functions (CLI)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-examples/core-functions-in-curl">Core Functions (HTTP)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit/did-web">Did-web in minutes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-examples/batch-generation">Batch Generation &amp; Verification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-examples/java-springboot">Spring Boot Java AuthN Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/didkit-examples/svelte-chapi">Svelte CHAPI</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Credible</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/credible/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/credible/install">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/credible/concepts">Core Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/credible/native">Native SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/credible/authn">Authenticating to other services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/credible/glossary">Glossary</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Credible Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/credible-examples/overview">Overview of Examples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/credible-examples/qr-issuance">QR Code Issuance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/credible-examples/vc-display">VC Display</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/credible-examples/did-tz-deploy">Deploying a DID:tz to Tezos Mainnet</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">References</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributing">Contributing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/code-of-conduct">Code of Conduct</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/privacy-policy">Privacy Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/glossary">Glossary</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/further-reading">Further Reading</a></li></ul></li></ul></div></div></div><main class="docMainContainer_r8cw"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">Document Loading</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="urls-that-point-to-documents"></a><em>URLs that point to documents</em><a class="hash-link" href="#urls-that-point-to-documents" title="Direct link to heading">#</a></h4><p>One of the trickiest things about Verifiable Credentials, for people without
JSON-LD or Semantic Web experience, is the referencing of external (linked)
documents, represented in Verifiable Credentials and other Linked-Data documents
by URLs. Thinking of them as URLs is deceptive, however, as fetching each from
the open web at the time of verification of a credential bears many risks to
both security and privacy-- although represented as URLs, they are best &quot;cached&quot;
or stored locally, to be checked at time of verification.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="document-types"></a>Document types<a class="hash-link" href="#document-types" title="Direct link to heading">#</a></h2><p>The most common Linked-Data documents used to make Verifiable Contexts more
portable are &quot;context files&quot;, which are linked in the mandatory <code>@context</code> field
of all verifiable credentials.  These contain all the additional the vocabulary
references needed to <a href="/docs/didkit/concepts#semantics">semantically disambiguate</a> the keys
and values that make up a credential. I say &quot;additional&quot; because there is a
<a href="https://www.w3.org/2018/credentials/v1" target="_blank" rel="noopener noreferrer">core vocabulary</a> in the core context
file maintained by the Verifiable Credentials working group, which must be
referenced by all conformant VCs to anchor all mandatory terms defined by the VC
specification. There are also some additional core vocabularies that cover a lot
of common semantics, like the <a href="https://schema.org/" target="_blank" rel="noopener noreferrer">schema.org</a> project central
to the Semantic Web community, and VC-specific extensions to the core context
maintained by the W3C-CCG community, such as the <a href="https://w3c-ccg.github.io/security-vocab/" target="_blank" rel="noopener noreferrer">security
vocabulary</a> for anchoring
cryptographic terms and proof-object properties and the <a href="https://w3c-ccg.github.io/traceability-vocab/" target="_blank" rel="noopener noreferrer">traceability
vocabulary</a> for anchoring terms
common across major supply chain use cases.  It is common practice, when
establishing anything from a small use-case to a vast ecosystem, to establish
one context file (or more) to anchor all the VCs involved.</p><p>In addition to context files, there are other kinds of Linked-Data/JSON-LD
documents that you might need to publish/host or resolve.  For example, the
<a href="https://w3c-ccg.github.io/vc-status-rl-2020/" target="_blank" rel="noopener noreferrer">RevocationList2020</a> and
<a href="https://w3c-ccg.github.io/vc-status-list-2021/" target="_blank" rel="noopener noreferrer">StatusList2021</a> specifications
rely on &quot;status lists&quot; to be published to and queried over the open web in much
the same was as context files. These lists are the linked-data equivalent of the
<a href="https://en.wikipedia.org/wiki/Online_Certificate_Status_Protocol" target="_blank" rel="noopener noreferrer">OCSP</a> status
lists so central to the certificate-authority PKI networks that power HTTPS/TLS
and other basic cybersecurity infrastructure. Like those, they may need to be
propagated and cached, with latency built into systems relying on them. See
below for details on how to handle that on both publisher and verifier sides of
the interaction.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="different-modes-of-document-loading"></a>Different modes of document loading<a class="hash-link" href="#different-modes-of-document-loading" title="Direct link to heading">#</a></h2><p>In a nutshell, there are three options for loading contexts into an
issuer/verifier, i.e., four different ways an instance of DIDKit can dereference
a URL pointing to a document. Technically, these are &quot;resources&quot; in the
classical sense, but DIDKit is configured to build and maintain a local
reference table to avoid fetching remote resources, which is disabled by
default.</p><p>Ranked by their simplicity and security, the four ways of loading a document for
issuance or verification purposes are:</p><ol><li>Package a resource into DIDKit at build time.</li><li>Load a context resource locally at run time. (Coming soon)</li><li>Periodically reload a context resource &quot;remotely&quot; from a remote trusted
source. (Coming soon)</li><li>Load a context resource remotely at time of verification (<em>Strongly
discouraged and not supported or endorsed by Spruce</em>)</li></ol><p>The security advantages of 1 over 2 and 2 over 3 should be clear, but it is also
worth mentioning that option #4 has major privacy/data-leakage implications
which make it categorically deprecated.  Option #3 is not completely free from
the complications and risks of option #4, so it is strongly recommended that 1
and 2 be ruled out categorically before finding an optimal balance of
mitigations and performance for implementing #3.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="pre-loading-a-document-resource-at-build-time"></a>Pre-loading a document resource at build time<a class="hash-link" href="#pre-loading-a-document-resource-at-build-time" title="Direct link to heading">#</a></h2><p>Any context file can be added to the directory, <code>ssi/contexts/</code>, which DIDKit
queries for contexts.  A few considerations, though:</p><ol><li>Context files are intellectual property, and as such should be covered by
licenses if upstreamed or otherwise distributed. Add licensing information
about any new context file to <code>ssi/contexts/LICENSES.md</code> and
<code>ssi/contexts/README.md</code> as needed.<ul><li>If it&#x27;s a W3C context file you are adding, simply add the name and URL in
<code>ssi/contexts/README.md</code> with the other W3C documents (they are already
covered by W3C license statements).</li><li>If the new context is covered by neither W3C&#x27;s license, or an Apache-2.0 or
CC-BY-SA-3.0 license, you will also need to update the license property in
<code>ssi/contexts/Cargo.toml</code>.</li></ul></li><li>Add a line in <code>contexts/src/lib.rs</code> using <code>include_str</code> to load the JSON-LD
file and export it as a <strong>constant variable</strong>.<ul><li>Optionally, you may want to add the URL in a rustdoc comment.</li></ul></li><li>In <code>ssi/src/jsonld.rs</code>:</li></ol><ul><li>Declare and export a constant for the context file&#x27;s canonical URL.</li><li>In the <code>lazy_static</code> block, define the context document as a
<code>RemoteDocument</code>, referencing the context file variable defined in
contexts/src/lib.rs and the constant defined for the URL.</li><li>In <code>StaticLoader</code>, match the context file&#x27;s URL(s) to the context document.</li></ul><p>After that, you are ready to follow the steps in didkit to build didkit-cli or
didkit-http, using the locally-modified ssi repo.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="loading-a-document-resource-locally-at-run-time"></a>Loading a document resource locally at run-time<a class="hash-link" href="#loading-a-document-resource-locally-at-run-time" title="Direct link to heading">#</a></h2><p>Coming soon!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="caching-remote-documents-at-run-time"></a>Caching remote documents at run-time<a class="hash-link" href="#caching-remote-documents-at-run-time" title="Direct link to heading">#</a></h2><p>Coming soon!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="loading-remote-document-at-run-time"></a>Loading remote document at run-time<a class="hash-link" href="#loading-remote-document-at-run-time" title="Direct link to heading">#</a></h2><p>Coming never! See above for reasons why we do not support this feature out of
the box.  Builder beware!</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/spruceid/spruceid.dev/edit/main/docs/didkit/document-loading.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/didkit/runtime-config"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Runtime Configuration</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/didkit/changelog"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DIDKit Changelog Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#document-types" class="table-of-contents__link">Document types</a></li><li><a href="#different-modes-of-document-loading" class="table-of-contents__link">Different modes of document loading</a></li><li><a href="#pre-loading-a-document-resource-at-build-time" class="table-of-contents__link">Pre-loading a document resource at build time</a></li><li><a href="#loading-a-document-resource-locally-at-run-time" class="table-of-contents__link">Loading a document resource locally at run-time</a></li><li><a href="#caching-remote-documents-at-run-time" class="table-of-contents__link">Caching remote documents at run-time</a></li><li><a href="#loading-remote-document-at-run-time" class="table-of-contents__link">Loading remote document at run-time</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://spruceid.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">SpruceID.com</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/sprucesystems" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://www.linkedin.com/company/sprucesystemsinc/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://github.com/spruceid/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Spruce Systems. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9b18645a.js"></script>
<script src="/assets/js/main.2e2ea6f1.js"></script>
</body>
</html>