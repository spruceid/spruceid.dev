"use strict";(self.webpackChunkdevsite=self.webpackChunkdevsite||[]).push([[6842],{3905:function(e,t,i){i.d(t,{Zo:function(){return d},kt:function(){return h}});var n=i(7294);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function p(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),i=t;return e&&(i="function"==typeof e?e(t):o(o({},t),e)),i},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var i=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),u=c(i),h=r,k=u["".concat(l,".").concat(h)]||u[h]||s[h]||a;return i?n.createElement(k,o(o({ref:t},d),{},{components:i})):n.createElement(k,o({ref:t},d))}));function h(e,t){var i=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=i.length,o=new Array(a);o[0]=u;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:r,o[1]=p;for(var c=2;c<a;c++)o[c]=i[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,i)}u.displayName="MDXCreateElement"},3053:function(e,t,i){i.r(t),i.d(t,{default:function(){return s},frontMatter:function(){return p},metadata:function(){return l},toc:function(){return c}});var n=i(7462),r=i(3366),a=(i(7294),i(3905)),o=["components"],p={id:"cli",title:"Command Line Interface",sidebar_title:"CLI"},l={unversionedId:"didkit-packages/cli",id:"didkit-packages/cli",isDocsHomePage:!1,title:"Command Line Interface",description:"[jwk]//tools.ietf.org/html/rfc7517",source:"@site/docs/didkit-packages/cli.md",sourceDirName:"didkit-packages",slug:"/didkit-packages/cli",permalink:"/docs/didkit-packages/cli",editUrl:"https://github.com/spruceid/spruceid.dev/edit/main/docs/didkit-packages/cli.md",version:"current",frontMatter:{id:"cli",title:"Command Line Interface",sidebar_title:"CLI"},sidebar:"docs",previous:{title:"Overview of DIDKit Packages",permalink:"/docs/didkit-packages/"},next:{title:"HTTP Server",permalink:"/docs/didkit-packages/http"}},c=[{value:"At a Glance",id:"at-a-glance",children:[]},{value:"Installation",id:"installation",children:[{value:"Docker",id:"docker",children:[]}]},{value:"Syntax",id:"syntax",children:[{value:"<code>help</code>",id:"help",children:[]},{value:"<code>generate-ed25519-key</code>",id:"generate-ed25519-key",children:[]},{value:"<code>key-to-did</code>",id:"key-to-did",children:[]},{value:"<code>key-to-verification-method</code>",id:"key-to-verification-method",children:[]},{value:"<code>vc-issue-credential</code>",id:"vc-issue-credential",children:[]},{value:"<code>vc-verify-credential</code>",id:"vc-verify-credential",children:[]},{value:"<code>vc-issue-presentation</code>",id:"vc-issue-presentation",children:[]},{value:"<code>vc-verify-presentation</code>",id:"vc-verify-presentation",children:[]}]},{value:"Addition configuration",id:"addition-configuration",children:[{value:"Outbound Proxy",id:"outbound-proxy",children:[]}]},{value:"Examples",id:"examples",children:[]}],d={toc:c};function s(e){var t=e.components,i=(0,r.Z)(e,o);return(0,a.kt)("wrapper",(0,n.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"at-a-glance"},"At a Glance"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"For setting up an HTTP server, whether for internal use, over the open internet, or both, we recommend using our dockerized HTTP server. Instructions ",(0,a.kt)("a",{parentName:"li",href:"#Docker"},"below")),(0,a.kt)("li",{parentName:"ul"},"Instructions for building manually can be found on the main ",(0,a.kt)("a",{parentName:"li",href:"/docs/didkit/install"},"Installation page")),(0,a.kt)("li",{parentName:"ul"},"See the ",(0,a.kt)("a",{parentName:"li",href:"#Examples"},"Examples")," section below for automation and testing building blocks.")),(0,a.kt)("h2",{id:"installation"},"Installation"),(0,a.kt)("h3",{id:"docker"},"Docker"),(0,a.kt)("p",null,"The HTTP server is containerised and available under\n",(0,a.kt)("inlineCode",{parentName:"p"},"ghcr.io/spruceid/didkit-cli"),"."),(0,a.kt)("p",null,"You can use the Docker image as a CLI:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ docker run ghcr.io/spruceid/didkit-cli:latest --help\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Note: You can pass JWKs either by sharing a volume with ",(0,a.kt)("inlineCode",{parentName:"p"},"docker run --volume"),", or by passing the JWK directly with ",(0,a.kt)("inlineCode",{parentName:"p"},"docker run -e JWK=$MY_JWK")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"docker run didkit-http --jwk $MY_JWK"),".")),(0,a.kt)("p",null,"See the repo's ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/spruceid/didkit/Dockerfile-cli"},"Dockerfile")," for further details."),(0,a.kt)("h2",{id:"syntax"},"Syntax"),(0,a.kt)("p",null,"Each command is called in the form:\n",(0,a.kt)("inlineCode",{parentName:"p"},"didkit help"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"didkit generate-ed25519-key"),", etc."),(0,a.kt)("h3",{id:"help"},(0,a.kt)("inlineCode",{parentName:"h3"},"help")),(0,a.kt)("p",null,"Output help about ",(0,a.kt)("inlineCode",{parentName:"p"},"didkit")," and its subcommands."),(0,a.kt)("h3",{id:"generate-ed25519-key"},(0,a.kt)("inlineCode",{parentName:"h3"},"generate-ed25519-key")),(0,a.kt)("p",null,"Generate a Ed25519 keypair and output it in\n",(0,a.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc8037#appendix-A.1"},"JWK format"),"."),(0,a.kt)("h3",{id:"key-to-did"},(0,a.kt)("inlineCode",{parentName:"h3"},"key-to-did")),(0,a.kt)("p",null,"Given a ",(0,a.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc7517"},"JWK"),", output the corresponding ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/did-method-key/"},"did:key"),"."),(0,a.kt)("p",null,"Currently, this only supports\n",(0,a.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc8037#appendix-A.2"},"Ed25519")," keys."),(0,a.kt)("h3",{id:"key-to-verification-method"},(0,a.kt)("inlineCode",{parentName:"h3"},"key-to-verification-method")),(0,a.kt)("p",null,"Given a Ed25519 ",(0,a.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc7517"},"JWK"),", output the corresponding\n",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/did-method-key/"},"did:key")," ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/security-vocab/#verificationMethod"},"verificationMethod"),"."),(0,a.kt)("h4",{id:"options"},"Options"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-k, --key-path <file>")," (required, conflicts with jwk):\nFilename of JWK file"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-j, --jwk <jwk>")," (required, conflicts with key-path):\nJWK.")),(0,a.kt)("h3",{id:"vc-issue-credential"},(0,a.kt)("inlineCode",{parentName:"h3"},"vc-issue-credential")),(0,a.kt)("p",null,"Issue a verifiable credential. Reads credential on stdin,\nconstructs a ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/ld-proofs/"},"linked data proof")," to add to the\ncredential, and outputs the resulting verifiable credential."),(0,a.kt)("p",null,"Corresponds to ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/vc-http-api/#/Issuer/issueCredential"},"/issue/credentials"),"\nin ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/vc-http-api/"},"vc-http-api"),"."),(0,a.kt)("p",null,"The proof type is set automatically based on the key file provided.\nJWK parameters besides the cryptographic components, such as\n",(0,a.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc7517#section-4.5"},"kid")," (Key ID), are ignored currently. For an RSA key, the\n",(0,a.kt)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc7517#section-4.4"},"alg")," (Algorithm) parameter is ignored and ",(0,a.kt)("inlineCode",{parentName:"p"},"RS256")," is used for\nit, for ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/lds-rsa2018/"},"RsaSignature2018"),"."),(0,a.kt)("h4",{id:"options-1"},"Options"),(0,a.kt)("p",null,"Options besides ",(0,a.kt)("inlineCode",{parentName:"p"},"--key-path")," correspond to linked data\n",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/ld-proofs/#dfn-proof-options"},"proof options")," as specified in ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/ld-proofs/"},"ld-proofs")," and ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/vc-http-api/"},"vc-http-api"),"."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-C, --challenge <challenge>")," - ",(0,a.kt)("a",{parentName:"li",href:"https://w3c-ccg.github.io/security-vocab/#challenge"},"challenge")," property of the\nproof"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-c, --created <created>")," - ",(0,a.kt)("a",{parentName:"li",href:"https://w3c-ccg.github.io/security-vocab/#created"},"created")," property of the proof.\nISO8601 datetime. Defaults to the current time."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-d, --domain <domain>")," - ",(0,a.kt)("a",{parentName:"li",href:"https://w3c-ccg.github.io/security-vocab/#domain"},"domain")," property of the proof"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-k, --key-path <key>")," (required, conflicts with jwk):\nFilename of JWK for signing."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-j, --jwk <jwk>")," (required, conflicts with key-path):\nJWK for signing."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-p, --proof-purpose <proof-purpose>")," ",(0,a.kt)("a",{parentName:"li",href:"https://w3c-ccg.github.io/security-vocab/#proofPurpose"},"proofPurpose"),"\nproperty of the proof."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-v, --verification-method <verification-method>"),(0,a.kt)("a",{parentName:"li",href:"https://w3c-ccg.github.io/security-vocab/#verificationMethod"},"verificationMethod"),"\nproperty of the proof. URI for proof verification\ninformation, e.g. a public key identifier.")),(0,a.kt)("h4",{id:"supported-jwk-key-types"},"Supported ",(0,a.kt)("a",{parentName:"h4",href:"https://tools.ietf.org/html/rfc7517#section-4.1"},"JWK key types")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"RSA")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"OKP")," (",(0,a.kt)("inlineCode",{parentName:"li"},"curve"),": ",(0,a.kt)("inlineCode",{parentName:"li"},"Ed25519"),")")),(0,a.kt)("h3",{id:"vc-verify-credential"},(0,a.kt)("inlineCode",{parentName:"h3"},"vc-verify-credential")),(0,a.kt)("p",null,"Verify a verifiable credential. Reads verifiable credential on\nstandard input, and outputs verification result. Returns exit\nstatus zero if credential successfully verified, or non-zero\nif errors were encountered."),(0,a.kt)("p",null,"Corresponds to ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/vc-http-api/#/Verifier/verifyCredential"},"/verify/credentials"),"\nin ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/vc-http-api/"},"vc-http-api"),"."),(0,a.kt)("h4",{id:"options-2"},"Options"),(0,a.kt)("p",null,"Options are linked data ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/ld-proofs/#dfn-proof-options"},"proof options")," as specified in\n",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/ld-proofs/"},"ld-proofs")," and ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/vc-http-api/"},"vc-http-api"),". If there is more than one\nproof present, at least one must pass all the requirements\npassed in the options."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-C, --challenge <challenge>")," - The ",(0,a.kt)("a",{parentName:"li",href:"https://w3c-ccg.github.io/security-vocab/#challenge"},"challenge")," property\nof the proof must equal this value."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-c, --created <created>")," - The ",(0,a.kt)("a",{parentName:"li",href:"https://w3c-ccg.github.io/security-vocab/#created"},"created")," property of the\nproof must be on or after the given ISO8601 datetime. Defaults\nto the current time."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-d, --domain <domain>")," - The ",(0,a.kt)("a",{parentName:"li",href:"https://w3c-ccg.github.io/security-vocab/#domain"},"domain")," property of the proof\nmust equal the given value."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-p, --proof-purpose <proof-purpose>")," - The ",(0,a.kt)("a",{parentName:"li",href:"https://w3c-ccg.github.io/security-vocab/#proofPurpose"},"proofPurpose"),"\nproperty of the proof must equal this value."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-v, --verification-method <verification-method>")," - The\n",(0,a.kt)("a",{parentName:"li",href:"https://w3c-ccg.github.io/security-vocab/#verificationMethod"},"verificationMethod")," property of the proof must equal this value.")),(0,a.kt)("h4",{id:"supported-proof-types"},"Supported proof types"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://w3c-ccg.github.io/lds-rsa2018/"},"RsaSignature2018")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://w3c-ccg.github.io/lds-ed25519-2018/"},"Ed25519VerificationKey2018"))),(0,a.kt)("h4",{id:"output"},"Output"),(0,a.kt)("p",null,"The verification result output is a ",(0,a.kt)("inlineCode",{parentName:"p"},"VerificationResult")," JSON\nobject as specified in ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/vc-http-api/"},"vc-http-api"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "checks": [],\n  "warnings": [],\n  "errors": []\n}\n')),(0,a.kt)("p",null,"Verification result properties:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"checks")," - Array of strings indicating checks completed\non the credential."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"warnings")," - Array of warnings encountered during\nvalidation or verification."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"errors")," - Array of strings indicating errors encountered\nduring validation or verification. If ",(0,a.kt)("inlineCode",{parentName:"li"},"errors")," is empty,\nthe credential is verified.")),(0,a.kt)("h3",{id:"vc-issue-presentation"},(0,a.kt)("inlineCode",{parentName:"h3"},"vc-issue-presentation")),(0,a.kt)("p",null,"Issue a verifiable presentation. Reads presentation on stdin,\ngenerates proof to add to it, and outputs the resulting\nverifiable presentation."),(0,a.kt)("p",null,"Corresponds to ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/vc-http-api/#/Holder/provePresentation"},"/prove/presentations"),"\nin ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/vc-http-api/"},"vc-http-api"),"."),(0,a.kt)("p",null,"Options are the same as for\n",(0,a.kt)("a",{parentName:"p",href:"#vc-issue-credential"},"vc-issue-credential"),"."),(0,a.kt)("h3",{id:"vc-verify-presentation"},(0,a.kt)("inlineCode",{parentName:"h3"},"vc-verify-presentation")),(0,a.kt)("p",null,"Verify a verifiable presentation. Reads verifiable presentation\non stdin, and outputs verification result. Returns exit status\nzero if presentation successfully verified, or non-zero if\nerrors were encountered."),(0,a.kt)("p",null,"Corresponds to ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/vc-http-api/#/Verifier/verifyPresentation"},"/verify/presentations"),"\nin ",(0,a.kt)("a",{parentName:"p",href:"https://w3c-ccg.github.io/vc-http-api/"},"vc-http-api"),"."),(0,a.kt)("p",null,"Options and output format are the same as for\n",(0,a.kt)("a",{parentName:"p",href:"#vc-verify-credential"},"vc-verify-credential"),"."),(0,a.kt)("h2",{id:"addition-configuration"},"Addition configuration"),(0,a.kt)("h3",{id:"outbound-proxy"},"Outbound Proxy"),(0,a.kt)("p",null,"You can set the environment variable ",(0,a.kt)("inlineCode",{parentName:"p"},"HTTP_PROXY")," to have DIDKit use a proxy.\nBoth HTTP and SOCKS protocols are supported. See the\n",(0,a.kt)("a",{parentName:"p",href:"/docs/didkit/runtime-config#proxies"},'"proxies"')," section of the DIDKit docs\nfor more details."),(0,a.kt)("h2",{id:"examples"},"Examples"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Tool"),(0,a.kt)("th",{parentName:"tr",align:null},"Example"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Core CLI syntax"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"/docs/didkit-examples/core-functions-in-bash/"},"Example script"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Batching, Automation"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"/docs/didkit-examples/batch-generation/"},"Example automation script"))))))}s.isMDXComponent=!0}}]);